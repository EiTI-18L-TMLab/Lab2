# File miracle.asm
0000			org 1800h 
1800			START: 
1800 31 ff 1f			LD SP, 0x1FFF 
1803 18 5b			jr MAIN 
1805 0x00...		ds 0x1838-$,0 ;org 1838h 
1838			INTERRUPT: 
1838 f5				PUSH AF 
1839 db 01			IN A, (1) 
183b e6 0f			AND 0Fh 
183d 47				LD B, A 
183e d3 01			OUT (1), A 
1840 f1				POP AF 
1841 fb				EI 
1842 c9				RET 
1843 0x00...		ds 0x1860-$,0 ;org 1860h 
1860			MAIN: 
1860 db 01			IN A, (1) ; ≈ÅADOWANIE Z WEJSCIA 
1862 e6 0f			AND 0Fh 
1864 47				LD B, A 
1865 d3 01			OUT (1), A ; ODSWIEzENIE LED 
1867 16 ff			LD D, 255 
1869 ed 56			IM 1 
186b fb				EI	 
186c 4a				LD C, D 
186d db 01			IN A, (1) 
186f cb 77			BIT 6, A ; PRZYCISK CLK 
1871 1e 00			LD E, 0 
1873			MAIN_LOOP: 
1873 7b				LD A, E 
1874 e6 ff			AND 0xFF 
1876 20 18			JR NZ, LOOP_POSITIVE 
1878			 
1878			LOOP_NEGATIVE: 
1878 db 01			IN A, (1) 
187a cb 77			BIT 6, A ; PRZYCISK CLK	 
187c 28 01			JR Z, IF_1 
187e 4a				LD C, D 
187f			IF_1: 
187f 20 01			JR NZ, IF_2 
1881 0d				DEC C 
1882			IF_2: 
1882 20 ef			JR NZ, MAIN_LOOP 
1884 05				DEC B 
1885 f3				DI 
1886 78				LD A, B 
1887 e6 0f			AND 0Fh 
1889 d3 01			OUT (1), A 
188b fb				EI 
188c 1e 01			LD E, 1 
188e 18 e3			JR MAIN_LOOP 
1890			LOOP_POSITIVE: 
1890 db 01			IN A, (1) 
1892 cb 77			BIT 6, A ; PRZYCISK CLK	 
1894 20 01			JR NZ, IF_3 
1896 4a				LD C, D 
1897			IF_3: 
1897 28 01			JR Z, IF_4 
1899 0d				DEC C 
189a			IF_4: 
189a 28 d7			JR Z, MAIN_LOOP 
189c 1e 00			LD E, 0 
189e 18 d3			JR MAIN_LOOP
# End of file miracle.asm
18a0
